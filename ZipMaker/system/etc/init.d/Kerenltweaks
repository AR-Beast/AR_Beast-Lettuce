#!/system/bin/sh
#Made by Ayush Rathore

# Turning off Core Control to allow changes--
echo 0 > /sys/module/msm_thermal/parameters/temp_safety

# Incresing Temp Threshold to allow changes--
echo 90 > /sys/module/msm_thermal/parameters/temp_threshold

# kCAL settings for more vibrancy and better colour reproduction--
echo 33 > /sys/devices/platform/kcal_ctrl.0/kcal_min
echo 273 > /sys/devices/platform/kcal_ctrl.0/kcal_sat
echo 252 > /sys/devices/platform/kcal_ctrl.0/kcal_val
echo 258 > /sys/devices/platform/kcal_ctrl.0/kcal_cont


# Set Minimum CPU-Frequency to 200MHz for big and LITTLE Cluster--
echo 1 > /sys/devices/system/cpu/cpu0/online
echo 200000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
echo 1 > /sys/devices/system/cpu/cpu4/online
echo 200000 > /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq


# Enable and Configure Interactive Governor for Big.little Cluster--
# Thanks to Anand Shekhawat for Scripts
echo interactive > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
echo interactive > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
echo 30000  > /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time
echo 40000  > /sys/devices/system/cpu/cpu4/cpufreq/interactive/min_sample_time
echo 40000  > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate
echo 40000  > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_rate
echo 60000  > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack
echo 60000  > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_slack
echo 1  > /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down
echo 1  > /sys/devices/system/cpu/cpu4/cpufreq/interactive/fast_ramp_down
echo 30000 800000:40000 1000000:50000 1350000:70000 1500000:100000 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay
echo 30000 600000:30000 800000:50000 1000000:60000  > /sys/devices/system/cpu/cpu4/cpufreq/interactive/above_hispeed_delay
echo 200000 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq
echo 200000 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/hispeed_freq
echo 111 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load
echo 111 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/go_hispeed_load
echo 75 800000:80 1000000:90 1350000:95 1500000:99 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads
echo 66 400000:55 600000:70 800000:85 1000000:95 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/target_loads
echo 0 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy
echo 0 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/io_is_busy
echo 1 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down
echo 1 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/fast_ramp_down
echo 0 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/boostpulse_duration
echo 0 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/boostpulse_duration

# Turning of logging--
stop logd

# Decreasing Poll Interval--
echo 1700000 > /sys/module/msm_thermal/parameters/poll_interval

# Setting up I/O Schedulers--
echo noop > /sys/block/mmcblk1/queue/scheduler
echo 1024 > /sys/block/mmcblk1/queue/read_ahead_kb
echo noop > /sys/block/mmcblk0/queue/scheduler
echo 1024 > /sys/block/mmcblk0/queue/read_ahead_kb

# Turning on State Notifier--
echo Y > /sys/module/state_notifier/parameters/enabled

# Turning on ArchPower--
echo 1 > /sys/kernel/sched/arch_power

# Changing PowerSuspend mode to UserSpace--
echo 1 > /sys/kernel/power_suspend/power_suspend_mode

# Disabling Battery Consuming Wakelocks--
echo N > /sys/module/wakeup/parameters/enable_smb135x_wake_ws
echo N > /sys/module/wakeup/parameters/enable_si_ws
echo N > /sys/module/wakeup/parameters/enable_msm_hsic_ws
echo N > /sys/module/wakeup/parameters/enable_wlan_rx_wake_ws
echo N > /sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws
echo N > /sys/module/wakeup/parameters/enable_wlan_wake_ws
echo N > /sys/module/wakeup/parameters/enable_netlink_ws
echo N > /sys/module/wakeup/parameters/enable_timerfd_ws

# Turning on Core Control--
echo 1 > /sys/module/msm_thermal/parameters/temp_safety

# Decresing Temp Threshold--
echo 40 > /sys/module/msm_thermal/parameters/temp_threshold
